"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[666],{3905:function(e,a,t){t.d(a,{Zo:function(){return c},kt:function(){return b}});var n=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),d=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},c=function(e){var a=d(e.components);return n.createElement(l.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(t),b=r,u=p["".concat(l,".").concat(b)]||p[b]||m[b]||o;return t?n.createElement(u,i(i({ref:a},c),{},{components:t})):n.createElement(u,i({ref:a},c))}));function b(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=p;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var d=2;d<o;d++)i[d]=t[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},2742:function(e,a,t){t.r(a),t.d(a,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return d},assets:function(){return c},toc:function(){return m},default:function(){return b}});var n=t(7462),r=t(3366),o=(t(7294),t(3905)),i=["components"],s={sidebar_position:1,title:"Instala\xe7\xe3o do Zabbix no formato modular",description:"Instala\xe7\xe3o no formato modular"},l=void 0,d={unversionedId:"zabbix/instalacao",id:"zabbix/instalacao",title:"Instala\xe7\xe3o do Zabbix no formato modular",description:"Instala\xe7\xe3o no formato modular",source:"@site/docs/zabbix/instalacao.md",sourceDirName:"zabbix",slug:"/zabbix/instalacao",permalink:"/zabbix/instalacao",editUrl:"https://github.com/andreazierik/andreazierik.github.io/blob/main/docs/zabbix/instalacao.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Instala\xe7\xe3o do Zabbix no formato modular",description:"Instala\xe7\xe3o no formato modular"},sidebar:"tutorialSidebar",previous:{title:"Translate your site",permalink:"/tutorial-extras/translate-your-site"}},c={},m=[],p={toc:m};function b(e){var a=e.components,s=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,n.Z)({},p,s,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Nesse tutorial vamos utilizar 3 m\xe1quinas."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Utilizei a distribui\xe7\xe3o AlmaLinux 8.5. SELinux e IPv6 est\xe3o desabilitados."))),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"IP"),(0,o.kt)("th",{parentName:"tr",align:null},"Nome"),(0,o.kt)("th",{parentName:"tr",align:null},"Descri\xe7\xe3o"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"192.168.10.251"),(0,o.kt)("td",{parentName:"tr",align:null},"Front-end"),(0,o.kt)("td",{parentName:"tr",align:null},"Web Server e Front-end do Zabbix")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"192.168.10.252"),(0,o.kt)("td",{parentName:"tr",align:null},"Back-end"),(0,o.kt)("td",{parentName:"tr",align:null},"Zabbix Server")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},"192.168.10.253"),(0,o.kt)("td",{parentName:"tr",align:null},"Banco de dados"),(0,o.kt)("td",{parentName:"tr",align:null},"Armazenar as informa\xe7\xf5es do Zabbix")))),(0,o.kt)("p",null,"Vamos come\xe7ar com a instala\xe7\xe3o e configura\xe7\xe3o do Banco de dados."),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"O Banco de dados suportado pelo Zabbix \xe9 o MySQL e PostgreSQL."),(0,o.kt)("p",{parentName:"div"},"Nesse tutorial utilizaremos o MySQL."))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"dnf install mysql-server -y\n\nsystemctl enable --now mysqld\n")),(0,o.kt)("p",null,"Ap\xf3s efetuar a instala\xe7\xe3o do MySQL, vamos configurar:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mysql_secure_installation\n\nVALIDATE PASSWORD COMPONENT can be used to test passwords\nand improve security. It checks the strength of password\nand allows the users to set only those passwords which are\nsecure enough. Would you like to setup VALIDATE PASSWORD component?\n\nPress y|Y for Yes, any other key for No: Yes\n\nThere are three levels of password validation policy:\n\nLOW    Length >= 8\nMEDIUM Length >= 8, numeric, mixed case, and special characters\nSTRONG Length >= 8, numeric, mixed case, special characters and dictionary                  file\n\nPlease enter 0 = LOW, 1 = MEDIUM and 2 = STRONG:  1\n\nPlease set the password for root here.\n\nNew password: \n\nRe-enter new password: \n\nEstimated strength of the password: 100 \nDo you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : Yes\n\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : Yes\n\nDisallow root login remotely? (Press y|Y for Yes, any other key for No) : Yes\n\nRemove test database and access to it? (Press y|Y for Yes, any other key for No) : Yes\n\nReload privilege tables now? (Press y|Y for Yes, any other key for No) : Yes\n")),(0,o.kt)("p",null,"Vamos acessar o MySQL, criar o banco de dados e usu\xe1rios do Zabbix"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mysql -uroot -p\n\nmysql> CREATE DATABASE zabbix CHARACTER SET utf8 COLLATE utf8_bin;\nmysql> CREATE USER zabbix_web@192.168.10.251 (IP_FRONTEND) IDENTIFIED BY 'PASSWORD';\nmysql> CREATE USER zabbix_srv@192.168.10.252 (IP_ZABBIX-SERVER) IDENTIFIED BY 'PASSWORD';\n\nmysql> GRANT ALL PRIVILEGES ON zabbix.* to 'zabbix_srv'@192.168.10.252;\nmysql> GRANT select, update, delete, insert ON zabbix.* TO 'zabbix_web'@192.168.10.251;\n")),(0,o.kt)("p",null,"Finalizada a instal\xe3o e configura\xe7\xe3o do Banco de dados, vamos come\xe7ar a instalar o Zabbix Front-end.\nAcessa a m\xe1quina 192.168.10.251"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm\ndnf clean all\n\ndnf install zabbix-web-mysql zabbix-apache-conf -y\n\nvim /etc/php-fpm.d/zabbix.conf\n; php_value[data.timezone] = Europe/Riga # descomentar e alterar para America/Sao_Paulo\n\nsystemctl restart httpd php-fpm\nsystemctl enable htppd php-fpm\n")),(0,o.kt)("p",null,"Partiremos para instala\xe7\xe3o do Zabbix Server, na m\xe1quina 192.168.10.252"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"rpm -Uvh https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm\ndnf clean all\n\ndnf install zabbix-server-mysql zabbix-agent -y\ndnf install mysql -y # cliente mysql\n\nzcat /usr/share/doc/zabbix-server-mysql/create.sql.gz | mysql -h192.168.10.253 -uzabbix_srv -p zabbix\n\nvim /etc/zabbix/zabbix_server.conf\n\nDBHost=192.168.10.253 \nDBUser=zabbix\nDBPassword=(Senha definida)\n\nsystemctl restart zabbix-server zabbix-agent\nsystemctl enable zabbix-server zabbix-agent\n")),(0,o.kt)("p",null,"Acesse, via browser, o IP 192.168.10.251/zabbix. A tela de boas vindas, com o Wizard de instala\xe7\xe3o ser\xe1 exibida.\nBasta passarmos as informa\xe7\xf5es de acesso:"),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Zabbix DB Connection",src:t(489).Z,width:"852",height:"506"})),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"Zabbix Server Details",src:t(2517).Z,width:"852",height:"506"})),(0,o.kt)("p",null,"Se tudo der certo ser\xe1 exibida uma tela informando que a instala\xe7\xe3o do Zabbix Front-end foi bem sucedida"),(0,o.kt)("p",null,(0,o.kt)("img",{loading:"lazy",alt:"You have successfully installed Zabbix frontend",src:t(7800).Z,width:"852",height:"506"})))}b.isMDXComponent=!0},7800:function(e,a,t){a.Z=t.p+"assets/images/finish_install-0d79a47758955a7ff63bf229e29c1d66.png"},489:function(e,a,t){a.Z=t.p+"assets/images/zabbix_db_connection-237182e50baee42eb6c687683841bc84.png"},2517:function(e,a,t){a.Z=t.p+"assets/images/zabbix_server_details-7409a69bdf34eaf03b1cfcf908560977.png"}}]);